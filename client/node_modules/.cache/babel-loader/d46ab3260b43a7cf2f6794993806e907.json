{"ast":null,"code":"import _defineProperty from \"/Users/elba/Desktop/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/elba/Desktop/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/elba/Desktop/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/elba/Desktop/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/elba/Desktop/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/elba/Desktop/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/elba/Desktop/final-project/client/src/components/pages/AddPhoto.jsx\";\n// components/AddThing.js\nimport React, { Component } from \"react\"; // import the service file since we need it to send (and get) the data to(from) server\n\nimport service from '../../api';\n\nvar AddPhoto =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddPhoto, _Component);\n\n  function AddPhoto(props) {\n    var _this;\n\n    _classCallCheck(this, AddPhoto);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddPhoto).call(this, props));\n\n    _this.handleChange = function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleFileUpload = function (e) {\n      console.log(\"The file to be uploaded is: \", e.target.files[0]);\n      var uploadData = new FormData(); // imageUrl => this name has to be the same as in the model since we pass\n      // req.body to .create() method when creating a new thing in '/api/things/create' POST route\n\n      uploadData.append(\"imageUrl\", e.target.files[0]);\n      service.handleUpload(uploadData).then(function (response) {\n        // console.log('response is: ', response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state \n        _this.setState({\n          imageUrl: response.secure_url\n        }, function () {\n          console.log(\"THE STATE IS:\", _this.state);\n        });\n      }).catch(function (err) {\n        console.log(\"Error while uploading the file: \", err);\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      service.saveNewThing(_this.state).then(function (res) {\n        console.log('added: ', res); // here you would redirect to some other page \n      }).catch(function (err) {\n        console.log(\"Error while adding the thing: \", err);\n      });\n    };\n\n    _this.state = {\n      name: \"\",\n      description: \"\",\n      imageUrl: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(AddPhoto, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"New Thing\"), React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return _this2.handleSubmit(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        onChange: function onChange(e) {\n          return _this2.handleFileUpload(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Save new thing\")));\n    }\n  }]);\n\n  return AddPhoto;\n}(Component);\n\nexport default AddPhoto;","map":{"version":3,"sources":["/Users/elba/Desktop/final-project/client/src/components/pages/AddPhoto.jsx"],"names":["React","Component","service","AddPhoto","props","handleChange","e","target","name","value","setState","handleFileUpload","console","log","files","uploadData","FormData","append","handleUpload","then","response","imageUrl","secure_url","state","catch","err","handleSubmit","preventDefault","saveNewThing","res","description"],"mappings":";;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,WAApB;;IAEMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UASnBC,YATmB,GASJ,UAAAC,CAAC,EAAI;AAAA,sBACMA,CAAC,CAACC,MADR;AAAA,UACVC,IADU,aACVA,IADU;AAAA,UACJC,KADI,aACJA,KADI;;AAElB,YAAKC,QAAL,qBAAiBF,IAAjB,EAAwBC,KAAxB;AACD,KAZkB;;AAAA,UAenBE,gBAfmB,GAeA,UAAAL,CAAC,EAAI;AACtBM,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CP,CAAC,CAACC,MAAF,CAASO,KAAT,CAAe,CAAf,CAA5C;AAEA,UAAMC,UAAU,GAAG,IAAIC,QAAJ,EAAnB,CAHsB,CAItB;AACA;;AACAD,MAAAA,UAAU,CAACE,MAAX,CAAkB,UAAlB,EAA8BX,CAAC,CAACC,MAAF,CAASO,KAAT,CAAe,CAAf,CAA9B;AACAZ,MAAAA,OAAO,CAACgB,YAAR,CAAqBH,UAArB,EACGI,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB;AACA;AACA,cAAKV,QAAL,CAAc;AAAEW,UAAAA,QAAQ,EAAED,QAAQ,CAACE;AAArB,SAAd,EACE,YAAM;AAAEV,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B,MAAKU,KAAlC;AAA0C,SADpD;AAED,OANH,EAOGC,KAPH,CAOS,UAAAC,GAAG,EAAI;AACZb,QAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgDY,GAAhD;AACD,OATH;AAUD,KAhCkB;;AAAA,UAmCnBC,YAnCmB,GAmCJ,UAAApB,CAAC,EAAI;AAClBA,MAAAA,CAAC,CAACqB,cAAF;AAEAzB,MAAAA,OAAO,CAAC0B,YAAR,CAAqB,MAAKL,KAA1B,EACGJ,IADH,CACQ,UAAAU,GAAG,EAAI;AACXjB,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBgB,GAAvB,EADW,CAEX;AACD,OAJH,EAKGL,KALH,CAKS,UAAAC,GAAG,EAAI;AACZb,QAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CY,GAA9C;AACD,OAPH;AAQD,KA9CkB;;AAEjB,UAAKF,KAAL,GAAa;AACXf,MAAAA,IAAI,EAAE,EADK;AAEXsB,MAAAA,WAAW,EAAE,EAFF;AAGXT,MAAAA,QAAQ,EAAE;AAHC,KAAb;AAFiB;AAOlB;;;;6BAyCQ;AAAA;;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAM,QAAA,QAAQ,EAAE,kBAAAf,CAAC;AAAA,iBAAI,MAAI,CAACoB,YAAL,CAAkBpB,CAAlB,CAAJ;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAaE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,QAAQ,EAAE,kBAACA,CAAD;AAAA,iBAAO,MAAI,CAACK,gBAAL,CAAsBL,CAAtB,CAAP;AAAA,SAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,EAgBE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAhBF,CAFF,CADF;AAuBD;;;;EAzEoBL,S;;AA4EvB,eAAeE,QAAf","sourcesContent":["// components/AddThing.js\nimport React, { Component } from \"react\";\n\n// import the service file since we need it to send (and get) the data to(from) server\nimport service from '../../api';\n\nclass AddPhoto extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      description: \"\",\n      imageUrl: \"\"\n    };\n  }\n\n  handleChange = e => {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n\n  // this method handles just the file upload\n  handleFileUpload = e => {\n    console.log(\"The file to be uploaded is: \", e.target.files[0]);\n\n    const uploadData = new FormData();\n    // imageUrl => this name has to be the same as in the model since we pass\n    // req.body to .create() method when creating a new thing in '/api/things/create' POST route\n    uploadData.append(\"imageUrl\", e.target.files[0]);\n    service.handleUpload(uploadData)\n      .then(response => {\n        // console.log('response is: ', response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state \n        this.setState({ imageUrl: response.secure_url },\n          () => { console.log(\"THE STATE IS:\", this.state) });\n      })\n      .catch(err => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  }\n\n  // this method submits the form\n  handleSubmit = e => {\n    e.preventDefault();\n\n    service.saveNewThing(this.state)\n      .then(res => {\n        console.log('added: ', res);\n        // here you would redirect to some other page \n      })\n      .catch(err => {\n        console.log(\"Error while adding the thing: \", err);\n      });\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>New Thing</h2>\n        <form onSubmit={e => this.handleSubmit(e)}>\n          {/* <label>Name</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={this.state.name}\n            onChange={e => this.handleChange(e)} />\n          <label>Description</label>\n          <textarea\n            type=\"text\"\n            name=\"description\"\n            value={this.state.description}\n            onChange={e => this.handleChange(e)} /> */}\n          <input\n            type=\"file\"\n            onChange={(e) => this.handleFileUpload(e)} />\n          <button type=\"submit\">Save new thing</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default AddPhoto;"]},"metadata":{},"sourceType":"module"}